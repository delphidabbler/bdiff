--------------------------------------------------------------------------------
BDiff / BPatch Tests
--------------------------------------------------------------------------------

This directory contains a set of tests of BDiff and BPatch. They are run by
calling Test.bat with various command line parameters.

Requirements
--------------------------------------------------------------------------------

1) Test.bat must be run from a command line console which has its current
   directory set to the directory that contains Test.bat

2) Files named Test1 and Test2 must be located in the same directory as
   Test.bat. Test1 and Test2 must be different versions of the same file. Two
   sample files are provided. Do not modify Test1 and Test2

3) Test.bat must be able to find the copies of BDiff.exe and BPatch.exe that it
   is to test. By default they are expected to be in the ..\Build\Exe directory
   relative to the directory where Test.bat is located.

   If the programs are not in ..\Build\Exe then the BDIFFPATH environment
   variable must be set to the directory that contains both programs. Do not
   include a backslash at the end of the path.

4) Files Diff-b, Diff-f and Diff-q must be in the test directory and must not be
   changed. These files are used to test that the diff files  generated by test
   patch, test quoted and test filtered and as expected. The tests will fail if
   these files or Test1 or Test2 have been modified.

Tests
--------------------------------------------------------------------------------

1) Patching test

   Call "Test.bat patch" to run this test.

   BDiff is run on Test1 and Test2 and creates a binary diff file named Patch.
   BPatch then applies Patch to Test1 to create Test3, which should be identical
   to Test2. The Windows FC command is used to verify that Test2 and Test3 are
   the same and that Patch is as expected (it must be the same as Diff-p.

2) Quoted format diff test

   Call "Test.bat quoted [view]" to run this test.

   BDiff is run on Test1 and Test2 and creates a quoted text diff named Diff
   that is compared against the expected content in Diff-q. If the optional view
   parameter is provided Diff is displayed in NotePad.

3) Filtered format diff test

   Call "Test.bat filtered [view]" to run this test.

   BDiff is run on Test1 and Test2 and creates a filtered text diff named Diff
   that is compared against the expected content in Diff-f. If the optional view
   parameter is provided Diff is displayed in NotePad.

4) Version test

   Call "Test.bat version" to run this test.

   Both BDiff and BPatch are called with the --version switch and both output
   their current version on the console.

5) Help test

   Call "Test.bat help" to run this test.

   Both BDiff and BPatch are called with the --help switch and both output their
   help screen on the console.

6) Cleanup

   Call "Test.bat clean" to run this test.

   Not actually a test: this simple clears up all the files generated by the
   other tests.

Example
--------------------------------------------------------------------------------

Suppose the versions of BDiff and BPatch to be tested are in C:\Utils and you
want to:
1) check the version of the programs
2) perform the Patch test
3) clear up the generated files.

Assume that Test.bat is stored in D:\BDiff\Test.

Open a command console then enter the following commands. In the following items
preceded by ">" are the commands you type and any following text represents the
output (your output may vary).

  >cd D:\BDiff\Test

  >D:

  >set BDIFFPATH=C:\Utils

  >Test version
  bdiff-0.2.6 02 Aug 2009
  bpatch-0.2.6 02 Aug 2009
  Done

  >Test patch
  --- Creating Patch with bdiff ---
  BDiff.exe: loading old file
  BDiff.exe: loading new file
  BDiff.exe: block sorting old file
  BDiff.exe: generating patch
  BDiff.exe: done

  --- Testing Patch file against expected Diff-b fc ---
  Comparing files Patch and DIFF-B
  FC: no differences encountered

  --- Applying Patch with bpatch ---

  --- Testing patched file against original with fc ---
  Comparing files Test2 and TEST3
  FC: no differences encountered

  Done

  >Test clean
  Done

--------------------------------------------------------------------------------
